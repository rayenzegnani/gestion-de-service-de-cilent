{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RAYEN\\\\Documents\\\\GitHub\\\\gestion-de-service-de-cilent\\\\client\\\\src\\\\components\\\\Tickets.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Tickets() {\n  _s();\n  const [tickets, setTickets] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [devices, setDevices] = useState([]);\n  const [clientId, setClientId] = useState('');\n  const [deviceId, setDeviceId] = useState('');\n  const [description, setDescription] = useState('');\n  const fetch = async () => {\n    const res = await api.get('/tickets');\n    setTickets(res.data);\n  };\n  const fetchClients = async () => {\n    const res = await api.get('/clients');\n    setClients(res.data);\n    if (res.data[0]) setClientId(res.data[0]._id);\n  };\n  const fetchDevices = async () => {\n    const res = await api.get('/devices');\n    setDevices(res.data);\n    if (res.data[0]) setDeviceId(res.data[0]._id);\n  };\n  useEffect(() => {\n    fetch();\n    fetchClients();\n    fetchDevices();\n  }, []);\n  const submit = async e => {\n    e.preventDefault();\n    await api.post('/tickets', {\n      client: clientId,\n      device: deviceId,\n      description\n    });\n    setDescription('');\n    fetch();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold mb-2\",\n      children: \"Tickets\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      className: \"flex gap-2 mb-3 items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"border rounded p-2\",\n        value: clientId,\n        onChange: e => setClientId(e.target.value),\n        children: clients.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c._id,\n          children: c.name\n        }, c._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"border rounded p-2\",\n        value: deviceId,\n        onChange: e => setDeviceId(e.target.value),\n        children: devices.map(d => {\n          var _d$client;\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: d._id,\n            children: [d.type, \" \\u2014 \", (_d$client = d.client) === null || _d$client === void 0 ? void 0 : _d$client.name]\n          }, d._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-1 border rounded p-2\",\n        placeholder: \"Description\",\n        value: description,\n        onChange: e => setDescription(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-indigo-600 text-white px-3 rounded\",\n        children: \"Cr\\xE9er\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-2 max-h-96 overflow-auto\",\n      children: tickets.map(t => {\n        var _t$device, _t$client;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"p-3 bg-white rounded border flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [t.status, \" \\u2014 \", (_t$device = t.device) === null || _t$device === void 0 ? void 0 : _t$device.type, \" \\u2014 \", (_t$client = t.client) === null || _t$client === void 0 ? void 0 : _t$client.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-base\",\n              children: t.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: new Date(t.createdAt).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)]\n        }, t._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(Tickets, \"lcsFW6Ua+epba5/elz0kGSAztHc=\");\n_c = Tickets;\nvar _c;\n$RefreshReg$(_c, \"Tickets\");","map":{"version":3,"names":["React","useEffect","useState","api","jsxDEV","_jsxDEV","Tickets","_s","tickets","setTickets","clients","setClients","devices","setDevices","clientId","setClientId","deviceId","setDeviceId","description","setDescription","fetch","res","get","data","fetchClients","_id","fetchDevices","submit","e","preventDefault","post","client","device","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","map","c","name","d","_d$client","type","placeholder","t","_t$device","_t$client","status","Date","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/RAYEN/Documents/GitHub/gestion-de-service-de-cilent/client/src/components/Tickets.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../services/api';\n\nexport default function Tickets(){\n  const [tickets, setTickets] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [devices, setDevices] = useState([]);\n  const [clientId, setClientId] = useState('');\n  const [deviceId, setDeviceId] = useState('');\n  const [description, setDescription] = useState('');\n\n  const fetch = async ()=>{\n    const res = await api.get('/tickets');\n    setTickets(res.data);\n  };\n  const fetchClients = async ()=>{\n    const res = await api.get('/clients');\n    setClients(res.data);\n    if(res.data[0]) setClientId(res.data[0]._id);\n  }\n  const fetchDevices = async ()=>{\n    const res = await api.get('/devices');\n    setDevices(res.data);\n    if(res.data[0]) setDeviceId(res.data[0]._id);\n  }\n\n  useEffect(()=>{ fetch(); fetchClients(); fetchDevices(); }, []);\n\n  const submit = async (e)=>{\n    e.preventDefault();\n    await api.post('/tickets', { client: clientId, device: deviceId, description });\n    setDescription('');\n    fetch();\n  };\n\n  return (\n    <div>\n      <h3 className=\"text-lg font-semibold mb-2\">Tickets</h3>\n      <form onSubmit={submit} className=\"flex gap-2 mb-3 items-center\">\n        <select className=\"border rounded p-2\" value={clientId} onChange={e=>setClientId(e.target.value)}>\n          {clients.map(c => <option key={c._id} value={c._id}>{c.name}</option>)}\n        </select>\n        <select className=\"border rounded p-2\" value={deviceId} onChange={e=>setDeviceId(e.target.value)}>\n          {devices.map(d => <option key={d._id} value={d._id}>{d.type} — {d.client?.name}</option>)}\n        </select>\n        <input className=\"flex-1 border rounded p-2\" placeholder=\"Description\" value={description} onChange={e=>setDescription(e.target.value)} />\n        <button type=\"submit\" className=\"bg-indigo-600 text-white px-3 rounded\">Créer</button>\n      </form>\n      <ul className=\"space-y-2 max-h-96 overflow-auto\">\n        {tickets.map(t => (\n          <li key={t._id} className=\"p-3 bg-white rounded border flex justify-between items-center\">\n            <div>\n              <div className=\"text-sm text-gray-600\">{t.status} — {t.device?.type} — {t.client?.name}</div>\n              <div className=\"text-base\">{t.description}</div>\n            </div>\n            <div className=\"text-sm text-gray-500\">{new Date(t.createdAt).toLocaleString()}</div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}